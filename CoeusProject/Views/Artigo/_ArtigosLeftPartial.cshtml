@model CoeusProject.Models.Usuario
@using Kendo.Mvc.UI
@using CoeusProject.Models
@using CoeusProject.Facade

@{
    Layout = null;
    Usuario usuarioLogado = AccountFacade.GetLoggedInUser();
}

<script>
    var idDonoArtigo = '@Model.IdUsuario';
    function gridArtigos_Data() {
        return { idUsuario: idDonoArtigo };
    }

    function btnNovoArtigo_Click(e) {
        $('#divContent').load('@Url.Action("CreatePartial","Artigo")');
    }
</script>

@{if (usuarioLogado.IdUsuario == Model.IdUsuario)
{
    <div style="text-align: left">
        @(Html.Kendo().Button()
        .Name("btnNovoArtigo")
        .Content("Novo Artigo")
        .HtmlAttributes(new { @type = "button", @style="width: 100%" })
        .Events(e => e.Click("btnNovoArtigo_Click")))
    </div>
}}

@(Html.Kendo().Grid<CoeusProject.Models.Artigo>()
    .Name("gridArtigos")
    .DataSource(dt => dt.Ajax().Read(r => r.Action("AjaxReadArtigos", "Artigo").Data("gridArtigos_Data")))
    .Columns(c =>
    {
        c.Bound(m => m.Objeto.NmObjeto).Title("<div style='margin: 0; padding: 0; width: 187px; overflow: hidden'>Artigos de " + Model.NmPessoa + "</div>")
            .Width(198).HtmlAttributes(new { @style = "width: 198px" });
    })
    .HtmlAttributes(new { @style = "font-size: 8pt; width: 198px" })
)